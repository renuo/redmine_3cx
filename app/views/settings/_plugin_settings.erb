<table>
  <tbody>
    <tr>
      <th>Active</th>
      <td>
        <%= check_box_tag "settings[active]", true, @settings[:active] %>
      </td>
    </tr>
    <tr>
      <th>Template</th>
      <td>
        <%= link_to "Download XML", redmine_3cx_template_path %>
      </td>
    </tr>
    <tr>
      <th>Redmine Contacts</th>
      <td>
        <% if Redmine::Plugin.installed?("redmine_contacts") %>
          Redmine Contacts is installed.
        <% else %>
          ⚠️ Redmine Contacts is not installed. Please make sure that the plugin is installed.
        <% end %>
      </td>
    </tr>
    <tr>
    <tr>
      <th>Rest API</th>
      <td>
        <% if Setting.rest_api_enabled %>
          API authentication is active.
        <% else %>
          ⚠️ Please active API authentication in <%= link_to "Settings", settings_path(tab: "api") %>.
        <% end %>
      </td>
    </tr>
    <tr>
      <th>Compatability</th>
      <td>
        <% compatible =
          if defined?(Contact)
            contact = Contact.new
            required_fields = [:id, :first_name, :last_name, :phone, :company]
            required_fields.map {|field| contact.respond_to?(field) }.all?
          else
            false
          end
        %>

        <% if compatible %>
          Plugin is compatible with Redmine Contacts.
        <% else %>
          ⚠️ Plugin is not compatible with Redmine Contacts.
          Please make sure that the migrations have been run and that the correct version has been installed.
        <% end %>
      </td>
    </tr>
  </tbody>
</table>
