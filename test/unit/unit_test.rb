require_relative "../test_helper"

class UnitTest < ActiveSupport::TestCase
  def setup
    @phones = [
      ["+41 76 123 45 67", "0761234567"],
      ["041 34 890 12 34", "0348901243"],
      ["+41 (0)79 555 45 78", "0795554578"],
      ["079 456 78 90", "0794567890"],
      ["+41 55 111 22 33", "0551112233"],
      ["043 234 56 78", "0432345678"],
      ["+41 24 123 45 67", "0241234567"],
      ["077 555 77 99", "0775557799"],
      ["+41 (0)31 456 78 90", "0314567890"],
      ["079 888 99 11", "0798889911"],
      ["+41 66 444 55 88", "0664445588"],
      ["044 234 56 78", "0442345678"],
      ["+41 22 333 44 55", "0223334455"],
      ["078 654 32 10", "0786543210"],
      ["+41 (0)21 987 65 43", "0219876543"],
      ["076 321 54 87", "0763215487"],
      ["+41 33 888 77 55", "0338887755"],
      ["045 678 90 12", "0456789012"],
      ["+41 42 112 13 14", "0421121314"]
    ]
  end

  def test_phones
    @phones.each do |param, expected|
      assert_equal(expected, map_phone_number(param))
    end
  end

  private

  def map_phone_number(number)
    number.gsub("+41", "").gsub(/\D/, "").rjust(10, "0")
  end
end
